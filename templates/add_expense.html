{% extends 'base.html' %}
   {% block customjsfunctions %}
    $(function() {
    $( "#id_expense_date" ).datepicker();
    $( "#id_expense_date_1").datepicker();
    $( "#id_expense_date_2").datepicker();
  });

  $(document).ready(function(){
//   alert('Into  document.ready')
    $(":button").click(function(){
  //    alert($(this).attr('id'));
        var id  =  $(this).attr('id');
        alert('Id is : '  +  id  )
        var res = id.split("_")
        var oper = res[0];
        alert('oper is :  ' + oper )
        var key = res[1];
        alert('key is:  ' + key )




   });

   $(":text").click(function(){
       alert($(this).attr('id'));
       var id = $(this).attr('id');
       alert('Id is :' + id  )
  //  $("#id_expense_date_1").datepicker()
      var id1 = "#"+id
     alert( 'id1 value is ' + id1  )
  });
});



    {% endblock %}
 {% block content %}

    {% if messages %} 
      {% for message in messages %}
      
      <p>   {{ message }} </p>
      {% endfor  %}
    {% endif %}
    
    {% block title %} Add Your Expenses {% endblock %}
 
      <div>
        <form id="add_expense_form" method="post" action="/save_expense/" >
        {% csrf_token  %}
        <table>
           <tr><td class="center" colspan="2"><b>Add new Expense:</b></td> </tr>
            {% for field in form %}
                <tr>
                    <td> {{ field.label_tag }}</td><td> {{ field }}</td>  
            {% endfor %}
                </tr>
        </table>
            <input type ="submit" name="Add Expense"  value="Submit"  />
       
        </form>
      </div>

    
{% if all_expenses %}
<table border="1" cellspacing="0" cellpadding="3px"   >
   <tr><td class="center" colspan="7"  ><b>Expense List </b></td> <tr>
    <tr>
        <td align="left"><strong>Date Spent</strong></td>
        <td align="left"><strong>Category</strong></td>
        <td align="left"><strong>Amount</strong></td>
        <td align="left"><strong>Payment Type</strong></td>
        <td align="left"><strong>Vendor</strong></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>

    </tr>
{% for expense in all_expenses %}
    <tr id ="tr_{{expense.id}}" value="{{expense.id}}">
    <td><input type="text" id="id_expense_date_{{expense.id}}" value="{{expense.expense_date}}"/></td>

{% if expenseCategory %}
<td><select id="id_expenseCategory_{{expense.id}}" name="expenseCategory">
   {% for cat in expenseCategory %}
       <option value="{{cat.id }}"   {% if cat.id ==  expense.expenseCategory_id %} selected="selected" {% endif %} >  {{cat.category_name }}  </option>
    {% endfor %} 
 </select>
</td>
{% endif %} 
    <td><input type="text" id="id_amount_{{expense.id}}" value="{{expense.amount_spent}}"/></td>

{% if expenseType %}
    <td><select id="id_expense_type_{{expense.id}}" name="expenseType" >
     {% for typ in expenseType %}
        <option value="{{typ.id}}" {% if typ.id == expense.expenseType_id %} selected="selected" {% endif %}> {{typ.type_name }} </option>
    {% endfor %}
  </select>
 </td>
{% endif %} 


{% if vendorType %}
    <td><select id="id_vendor_type" name="vendorType" >
    {% for vtyp in vendorType %} 
       <option value="{{vtyp.id }}" {% if vtyp.id == expense.vendorType_id %} selected="selected" {% endif %}> {{vtyp.vendor_name}} </option>
    {% endfor %}
   </select>
   </td>
 {% endif %}

  <td><input name="Button" id="up_{{expense.id}}" type="button"  value="Update"/></td>
  <td><input name="Button" id="dl_{{expense.id}}" type="button"  value="Delete"/></td>

 
  </tr>
{% endfor %}
</table>
{% endif %}

{% endblock %}
